Ragnarok Beta 1.0
===========
使用RSA非对称加密的聊天室

支持点对点私聊

求赞求鼓励

python3.8

### 原理

服务器启动时，产生一个RSA 2048秘钥对。

每个客户端也会生成自己的RSA 2048秘钥对.

#### 握手流程：

1.客户端发送自己的公钥

2.服务器向客户端发送公钥

（加密信道建立，随后所有信息都在RSA的加密之下）

3.客户端发送自己的用户名，服务器验证用户名没有被占用

4.用户名验证通过，服务器发送房间名，否则断开连接

#### 广播流程
客户端通过公钥向服务器发送不同种类的信息

一条来自客户端的广播信息以BC://开头，服务端解码后，将信息发给所有在线用户

#### 私聊流程

客户端定时发送脉冲包，获取当前服务器的在线用户名称，然后轮询获取其他用户的公钥

客户端把对某个用户私聊的信息用这个用户的公钥加密，再把信息包装成PM://，用服务器公钥加密后发送给服务器

服务器得到PM://开头的信息，解密得到目标用户名和密文，再将来源用户名和密文合成，发给目标用户

目标用户用自己的私钥解密，得到来源用户和密文，再将密文二次解密，得到明文。

此过程中服务器无法得知密文内容，仅作为转发

考虑到很多宽带都是NAT的内网，去中心化的聊天还涉及STUN的问题，综合考虑通过公网小鸡的TCP桥接最稳定，化繁为简。

有一根长长的网线，一直伸到你家里，你说什么做什么他们都知道的一清二楚。

于是我决定写这玩意

### 设置

pip3 install pycryptodomex

在config里改小鸡的公网IP和端口

登录密码为空时，服务器对公共开放

警告：要将VPS的运行语言改为UTF8编码，这差点坑死我，在windows上开发的时候好好的，一上鸡测试就莫名故障。最后发现是系统语言不匹配。



